<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <!-- 头部内容完全保持不变 -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Play Nalakubara - The ultimate monster survival adventure game online. Battle legendary creatures and survive in dynamic environments.">
    <meta name="keywords" content="Nalakubara, monster survivor, survival game, online action game, creature warfare">
    <link rel="canonical" href="https://nalakubara.com">
    
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .game-frame {
            aspect-ratio: 16/9;
            background: linear-gradient(135deg, #f5f5f7 0%, #e2e2e9 100%);
        }
        @media (max-width: 768px) {
            .game-frame {
                aspect-ratio: 9/16;
            }
        }
    </style>
    <title>Nalakubara - Monster Survival Online Game</title>
</head>
<body class="bg-gray-50 text-gray-900 font-[system-ui] antialiased">
    <main class="container mx-auto px-4 py-8 max-w-6xl">
        <!-- 主体内容完全保持不变 -->
        <header class="text-center mb-12">
            <!-- ... 保持不变 ... -->
        </header>

        <section class="rounded-xl shadow-2xl overflow-hidden mb-12 border-[14px] border-white bg-white">
            <!-- ... 游戏iframe保持不变 ... -->
        </section>

        <section class="prose prose-lg max-w-none mb-12">
            <!-- ... About The Game保持不变 ... -->
        </section>

        <div class="grid md:grid-cols-2 gap-8 mb-12">
            <!-- ... 功能模块保持不变 ... -->
        </div>
    </main>

    <!-- 全新用户互动系统（替换旧代码） -->
    <section class="container mx-auto px-4 max-w-3xl">
        <div class="bg-white rounded-xl shadow-lg p-8 mb-12">
            <!-- 评分系统 -->
            <div class="mb-8">
                <h3 class="text-xl font-semibold mb-4">游戏评分</h3>
                <div class="flex items-center gap-2 mb-3">
                    <div class="stars flex gap-1">
                        <span class="star cursor-pointer text-2xl text-gray-300 hover:text-yellow-400 transition-colors" data-value="5">★</span>
                        <span class="star cursor-pointer text-2xl text-gray-300 hover:text-yellow-400 transition-colors" data-value="4">★</span>
                        <span class="star cursor-pointer text-2xl text-gray-300 hover:text-yellow-400 transition-colors" data-value="3">★</span>
                        <span class="star cursor-pointer text-2xl text-gray-300 hover:text-yellow-400 transition-colors" data-value="2">★</span>
                        <span class="star cursor-pointer text-2xl text-gray-300 hover:text-yellow-400 transition-colors" data-value="1">★</span>
                    </div>
                    <span class="text-lg font-medium">
                        当前评分：<span id="averageRating" class="text-blue-600">0.0</span>/5
                    </span>
                </div>
            </div>

            <!-- 评论系统 -->
            <div class="mb-8">
                <h3 class="text-xl font-semibold mb-4">发表评论</h3>
                <textarea 
                    id="commentInput"
                    class="w-full p-4 border rounded-lg focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all"
                    placeholder="请分享您的游戏体验（至少20字）..."
                    rows="4"
                ></textarea>
                <button 
                    onclick="submitComment()"
                    class="mt-4 px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors"
                >
                    提交评论
                </button>
            </div>

            <!-- 好评展示 -->
            <div>
                <h3 class="text-xl font-semibold mb-4">玩家好评</h3>
                <div id="commentsList" class="space-y-4">
                    <!-- 评论动态加载 -->
                </div>
            </div>
        </div>
    </section>

    <!-- 原页脚保持不变 -->
    <footer class="bg-gray-100 border-t border-gray-200 mt-12">
        <div class="container mx-auto px-4 py-6 text-center">
            <p class="text-sm text-gray-600">
                ©2024 Nalakubara. All rights reserved. | 
                <a href="/privacy" class="text-blue-600 hover:text-blue-800 transition-colors">Privacy Policy</a>
            </p>
        </div>
    </footer>

    <script>
    // 更新后的交互逻辑
    let comments = JSON.parse(localStorage.getItem('comments')) || [];
    let currentRating = 0;

    // 星级评分初始化
    document.querySelectorAll('.star').forEach(star => {
        star.addEventListener('click', () => {
            currentRating = parseInt(star.dataset.value);
            document.querySelectorAll('.star').forEach(s => {
                s.classList.toggle('text-yellow-400', s.dataset.value <= currentRating);
                s.classList.toggle('text-gray-300', s.dataset.value > currentRating);
            });
        });
    });

    // 提交评论功能
    function submitComment() {
        const commentInput = document.getElementById('commentInput');
        if (commentInput.value.length >= 20 && currentRating > 0) {
            const newComment = {
                text: commentInput.value,
                rating: currentRating,
                date: new Date().toLocaleString('zh-CN', { 
                    year: 'numeric', 
                    month: '2-digit', 
                    day: '2-digit',
                    hour: '2-digit',
                    minute: '2-digit'
                })
            };
            
            comments.push(newComment);
            localStorage.setItem('comments', JSON.stringify(comments));
            updateCommentsDisplay();
            commentInput.value = '';
            currentRating = 0;
            document.querySelectorAll('.star').forEach(s => {
                s.classList.remove('text-yellow-400');
                s.classList.add('text-gray-300');
            });
        } else {
            alert('请填写至少20字的评论并选择评分');
        }
    }

    // 更新显示
    function updateCommentsDisplay() {
        const container = document.getElementById('commentsList');
        const filteredComments = comments
            .filter(c => c.rating >= 4)
            .sort((a, b) => new Date(b.date) - new Date(a.date));
        
        container.innerHTML = filteredComments.map(c => `
            <div class="bg-gray-50 p-4 rounded-lg">
                <div class="text-gray-800 mb-2">${c.text}</div>
                <div class="flex items-center justify-between text-sm text-gray-500">
                    <div class="flex items-center gap-1">
                        <span class="text-yellow-400">${'★'.repeat(c.rating)}</span>
                        <span class="text-gray-400">${'☆'.repeat(5 - c.rating)}</span>
                    </div>
                    <span>${c.date}</span>
                </div>
            </div>
        `).join('');

        // 更新平均分
        const average = comments.length > 0 
            ? (comments.reduce((sum, c) => sum + c.rating, 0) / comments.length).toFixed(1)
            : 0.0;
        document.getElementById('averageRating').textContent = average;
    }

    // 初始化显示
    updateCommentsDisplay();
    </script>
</body>
</html>
